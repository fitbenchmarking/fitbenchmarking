<!DOCTYPE html>
<html>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" href="{{ css_style_sheet }}" />
    <link rel="stylesheet" type="text/css" href="{{ table_style }}" />
    <link rel="stylesheet" type="text/css" href="{{ custom_style }}" />
    <head>
        <title>{{ run_name }}FitBenchmarking Fitting Report</title>
    </head>
    <body>
        <div class="wrapper">
            <div class="content">
                <div class="post-title">
                    <h1>{{ title }}</h1>
                    <hr>
                </div>
                <p>{{ description }}</p>
                <hr>
                <section class="accordion">
                    <input type="checkbox" name="collapse" id="start-accordion" checked="checked">
                    <h2 class="handle">
                        <label for="start-accordion">Problem Outline</label>
                    </h2>
                    <br>
                    <div class="content">
                        <table class="simple-table">
                            <colgroup>
                                <col width="30%" />
                                <col width="70%" />
                            </colgroup>
                            <tbody valign="top">
                                <!-- Summary Section -->
                                <tr>
                                    <td class="heading" colspan="2">Summary</td>
                                </tr>
                                <tr>
                                    <td class="label">Number of parameters</td>
                                    <td>{{ n_params }}</td>
                                </tr>
                                <tr>
                                    <td class="label">Number of data points</td>
                                    <td>{{ n_data_points }}</td>
                                </tr>
                                <!-- Functions Section -->
                                <tr>
                                    <td class="heading" colspan="2">Functions</td>
                                </tr>
                                <tr>
                                    <td class="label">Form</td>
                                    <td>{{ equation }}</td>
                                </tr>
                                <tr>
                                    <td class="label">Initial Parameters</td>
                                    {% if list_params %}
                                        <td>{{ initial_guess }}</td>
                                    {% else %}
                                        <td>Too many parameters to display</td>
                                    {% endif %}
                                </tr>
                            </tbody>
                        </table>
                        <div class="row">
                            {% if initial_plot_available %}
                                <iframe width="100%" height="500" frameborder="0" seamless="seamless" scrolling="no" src="{{ initial_plot }}"></iframe>
                            {% else %}
                                <h3>{{ initial_plot }}</h3>
                            {% endif %}
                        </div>
                    </div>
                </section>
            <section class="accordion">
                <input type="checkbox" name="collapse" id="fitting-results-accordion" checked="checked">
                <h2 class="handle">
                    <label for="fitting-results-accordion">Fitting Results</label>
                </h2>
                <div class="content">
                    {% if is_best_fit %}
                        <p>This is the <span class="pill">best</span> fit of the minimizers used.</p>
                    {% endif %}
                    <br>
                    <table class="simple-table">
                        <colgroup>
                            <col width="30%" />
                            <col width="70%" />
                        </colgroup>
                        <tbody valign="top">
                            <!-- Summary Section -->
                            <tr>
                                <td class="heading" colspan="2">Summary</td>
                            </tr>
                            <tr>
                                <td class="label">Minimizer</td>
                                <td>{{ minimizer }}</td>
                            </tr>
                            <tr>
                                <td class="label">Accuracy</td>
                                <td>{{ accuracy }}</td>
                            </tr>
                            <tr>
                                <td class="label">Runtime</td>
                                <td>{{ runtime }} seconds</td>
                            </tr>
                            <tr>
                                <td class="label">Energy Usage</td>
                                <td>{{ energy }}</td>
                            </tr>
                            <tr>
                                <td class="label">Number of iterations</td>
                                <td>{{ iteration_count }}</td>
                            </tr>
                            <tr>
                                <td class="label">Number of function evaluations</td>
                                <td>{{ func_evals }}</td>
                            </tr>
                            <!-- Functions Section -->
                            <tr>
                                <td class="heading" colspan="2">Functions</td>
                            </tr>
                            <tr>
                                <td class="label">Form</td>
                                <td>{{ equation }}</td>
                            </tr>
                            <tr>
                                <td class="label">Fitted Parameters</td>
                                {% if list_params %}
                                    <td>{{ min_params }}</td>
                                {% else %}
                                    <td>Too many parameters to display</td>
                                {% endif %}
                            </tr>
                        </tbody>
                    </table>
                    <div align="center" class="figure align-center">
                        {% if fitted_plot_available %}
                            <iframe width="100%" height="500" frameborder="0" seamless="seamless" scrolling="no" src="{{ fitted_plot }}"></iframe>
                        {% else %}
                            <h3>{{ fitted_plot }}</h3>
                        {% endif %}
                        {% if pdf_plot_available %}
                            <h3>Estimated posterior pdf of each parameter</h3>
                            <p>
                                The vertical red line on each pdf shows the Scipy curve fit parameter estimate, with the dashed vertical red lines indicating the 2 sigma error of the fit.
                                The area between the dashed lines is used to calculate the confidence in the MCMC fit.
                            </p>
                            <iframe width="100%" height="800" frameborder="0" seamless="seamless" scrolling="no" src="{{ pdf_plot }}"></iframe>
                        {% else %}
                            <h3>{{ pdf_plot }}</h3>
                        {% endif %}
                        <button class="btn default" onclick="history.go(-1)">
                        <i class="fa fa-arrow-left"></i>
                        </button>
                    </div>
                </div>
            </section>
        </div>
    </body>
</html>
